<Window x:Class="VisionCore.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wfi="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
        xmlns:cognex_controls="clr-namespace:Cognex.InSight.Web.Controls;assembly=Cognex.InSight.Web.Controls"
        xmlns:behaviors="clr-namespace:VisionCore.Views"
        Title="FAPLUS Vision Professional" Height="900" Width="1400"
        Background="#F5F5F5" WindowStyle="None" WindowState="Maximized">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />

        <Style x:Key="SmallIconBtnStyle" TargetType="ButtonBase">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="4,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ButtonBase">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3D3D3D"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="OnlineStatusImageStyle" TargetType="Image">
            <Setter Property="Source" Value="/Resources/Offline_64.png"/>
            <Setter Property="Width" Value="22"/>
            <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality"/>

            <Style.Triggers>
                <DataTrigger Binding="{Binding IsOnline}" Value="True">
                    <Setter Property="Source" Value="/Resources/Online_64.png"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>


    </Window.Resources>

    <DockPanel>
        <Grid x:Name="tLayout_Main">
            <Grid.RowDefinitions>
                <RowDefinition Height="55"/>
                <RowDefinition Height="50"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="150" MinHeight="30"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Background="#1E1E1E" BorderBrush="#121212" BorderThickness="0,0,0,1">
                <Grid>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                        <Image Source="/Resources/FAPLUS_Logo.jpg"
                       Height="42"
                       Stretch="Uniform"
                       VerticalAlignment="Center"
                       RenderOptions.BitmapScalingMode="HighQuality"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,10,0">
                        <TextBlock Text="{Binding StatusText}" Foreground="{Binding StatusColor}"
                           FontSize="16" VerticalAlignment="Center" Margin="0,0,20,0" FontWeight="Bold"/>

                        <Button Command="{Binding ConnectCommand}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="Connect Sensor">
                            <Image Source="/Resources/Run_48.png" Width="22" Opacity="0.9"/>
                        </Button>

                        <Rectangle Width="1" Fill="#444444" Margin="12,15"/>

                        <Button Command="{Binding CloseCommand}" Style="{StaticResource SmallIconBtnStyle}"
                        Background="#22C42B1C" ToolTip="Close Application">
                            <Image Source="/Resources/Close_48.png" Width="18"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <Border Grid.Row="1" Background="#2D2D2D" Padding="10,0" BorderBrush="#121212" BorderThickness="0,0,0,1">
                <Grid>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Command="{Binding NewJobCommand}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="New Job">
                            <Image Source="/Resources/NewJob_32.png" Width="18"/>
                        </Button>
                        <Button Command="{Binding OpenJobCommand}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="Open Job">
                            <Image Source="/Resources/JobOpen_32.png" Width="18"/>
                        </Button>
                        <Button Command="{Binding SaveCommand}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="Save Job">
                            <Image Source="/Resources/JobSave_32.png" Width="18"/>
                        </Button>

                        <Rectangle Width="1" Fill="#444444" Margin="15,12"/>

                        <Button Command="{Binding TriggerCommand}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="Manual Trigger">
                            <Image Source="/Resources/Trigger_32.png" Width="22"/>
                        </Button>
                        <ToggleButton IsChecked="{Binding IsLive}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="Live Mode">
                            <Image Source="/Resources/Live_32.png" Width="22"/>
                        </ToggleButton>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <ToggleButton IsChecked="{Binding IsOnline}"
                              Style="{StaticResource SmallIconBtnStyle}"
                              ToolTip="ONLINE/OFFLINE Mode"
                              Width="65">
                            <Image Style="{StaticResource OnlineStatusImageStyle}"/>
                        </ToggleButton>
                        <Rectangle Width="1" Fill="#444444" Margin="15,12"/>
                        <ToggleButton IsChecked="{Binding DisplayVM.IsGridVisible}" Style="{StaticResource SmallIconBtnStyle}" ToolTip="Show/Hide Grid">
                            <Image Source="/Resources/Sheet_32.png" Width="18"/>
                        </ToggleButton>

                        <Button Command="{Binding OpenConfigCommand}"
                            Style="{StaticResource SmallIconBtnStyle}"
                            ToolTip="System Configuration">
                            <Image Source="/Resources/Setting_64.png" Width="18" Opacity="0.8"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <Grid Grid.Row="2" Background="Black">
                <wfi:WindowsFormsHost behaviors:InSightBehavior.SensorSource="{Binding controlModel.IsInSightSensor}">
                    <cognex_controls:CvsDisplay x:Name="cvsDisplay"/>
                </wfi:WindowsFormsHost>

                <wfi:WindowsFormsHost Margin="30" Opacity="0.95"
                              Visibility="{Binding DisplayVM.IsGridVisible, Converter={StaticResource BoolToVis}}"
                              behaviors:InSightBehavior.SensorSource="{Binding controlModel.IsInSightSensor}">
                    <cognex_controls:CvsSpreadsheet x:Name="cvsSpreadsheet"/>
                </wfi:WindowsFormsHost>
            </Grid>

            <GridSplitter Grid.Row="3" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                  Background="#333333" ShowsPreview="True" ResizeBehavior="PreviousAndNext"/>

            <Border Grid.Row="4" Background="#1E1E1E" BorderBrush="#121212" BorderThickness="0,1,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="25"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#252525" VerticalAlignment="Center">
                        <TextBlock Text="LOG MESSAGES" Foreground="#888888" FontSize="11" Margin="10,0" VerticalAlignment="Center" FontWeight="Bold"/>
                    </StackPanel>

                    <ListBox Grid.Row="1" ItemsSource="{Binding loggerService.LogMessages}" ScrollViewer.VerticalScrollBarVisibility="Auto"
                     Background="#121212" BorderThickness="0" Foreground="#DCDCDC"
                     FontSize="12" FontFamily="Consolas">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Timestamp}" Foreground="#555555" FontSize="11"/>
                                    <TextBlock Grid.Column="1" Text="{Binding Message}" Foreground="{Binding LogColor}" TextWrapping="Wrap"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>